<div class="project-area"><span class="label label-default">Project Name</span><h1><%= @project.title %></h1></div>
<div class="project-details">
	<strong>Description:</strong> <%= @project.description %><br>
	<strong>Due Date:</strong> <%= standard_date(@project.due_date) %>
</div>
<hr>
<% if @task.errors.any? %>
<ul>
	<% @task.errors.full_messages.each do |msg| %>
	<li><%= msg %></li>
	<% end %>
</ul>
<% end %>
<div class="col-sm-12">
	<h3 class="category-headers">New Task</h4>
	<%# form_for @task, url: project_tasks_path(@project) do |f| %>
	<div class="task-form">
		<%= render partial: "/tasks/form", locals: {tasks: @project.tasks, project: @project } %>
	</div>
	<br>
	<div class="col-sm-6">
		<h4>Pending Tasks</h4>
			<div id="tasks">
				<%= render partial: "/tasks/tasks_table", locals: {tasks: @project.tasks.where(status: false)} %>
			</div>
	</div>
	<div class="col-sm-6">
		<h4>Completed Tasks</h4>
		
			<%= render partial: "/tasks/tasks_table", locals: {tasks: @project.tasks.where(status: true)} %>

	</div>
</div>
		<hr>
		<h3 class="category-headers">New Discussion</h3>
		<%= form_for [@project, @discussion] do |f| %>
		<div class="form-inline">
			<%= f.text_area :title, class: "form-control", placeholder: "Title", rows: 1 %>
			<%= f.text_area :description, class: "form-control", placeholder: "Description", rows: 1 %>
			<%= f.text_area :due_date, class: "form-control", placeholder: "Due Date", rows: 1 %>
			<%= f.submit class: "btn btn-default" %>
			<% end %>
		</div>
		<br>
		<table class="table borderless">
			<thead>
				<tr>
					<td>Title</td>
					<td>Description</td>
					<td>Due Date</td>
					<td colspan="2">&nbsp;</td>
				</tr>
			</thead>
			<% @project.discussions.each do |discussion| %>
			<tr id="<%= dom_id(discussion)%>">
				<td><strong><%= discussion.title %></strong></td>
				<td><%= discussion.description %></td>
				<td><%= standard_date(discussion.due_date) %></td>
				<td class="pull-right"><%= link_to "Edit", edit_project_discussion_path(@project, discussion), class: "btn btn-default" %>&nbsp;<%= link_to "Delete", project_discussion_path(@project, discussion), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-sm btn-danger", remote: true %></td>
			</tr>
			<tr colspan="5">
				<td><%= form_for [discussion, @comment || Comment.new ] do |f| %>
					<div>
						<%= f.text_area :body, class: "form-control", placeholder: "Comment", rows: 2 %>
					<br><%= f.submit class: "form-comment btn btn-sm btn-default" %></td>
				</div>
				<% end %>
			</tr>
			<tr>
				<td colspan="4"><button class="btn btn-xs" id="comments_button">Comments (<%= discussion.comments_count %>)</button>
					<% discussion.comments.each do |comment| %>
					<tr class="comments_container">
						<td colspan="3"><%= comment.body %></td>
						<td class="pull-right"><%= link_to "Edit", edit_discussion_comment_path(discussion, comment), class: "btn btn-xs btn-default" %>&nbsp;<%= link_to "Delete", discussion_comment_path(discussion, comment.id), method: :delete, data: { confirm: 'Are you sure?' }, class: "btn btn-xs btn-danger" %></td>
					</tr>
					<% end %>
				</td>
			</tr>
		</div>
		<% end %>
	</table>